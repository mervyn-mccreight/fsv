This specification describes Phonebook

â”€ [ NAME, PHONE ] â””

State space

â”Œ PhoneBook
  known :  ğ”½ NAME
  tel : NAME â‡¸ PHONE
|
  known = dom tel
â””

Initialization

â”Œ InitPhoneBook
 PhoneBook â€²
|
  telâ€² = âˆ…
â””


Operations

The good parts

â”Œ lookup
  ÎPhoneBook
  name? : NAME
  phone! : PHONE
|
  name? âˆˆ known
  phone! = tel(name?)
â””

â”Œ addName
  Î”PhoneBook
  name? : NAME
  phone? : PHONE
|
  name? âˆ‰ known
  
  telâ€² = tel âˆª { name? â†¦ phone? }
â””

â”Œ delName
  Î”PhoneBook
  name? : NAME
  phone? : PHONE
|
  name? âˆˆ known
  
  telâ€² = tel âˆ– { name? â†¦ phone? }
â””


Error handling

â”€
  REPORT ::= okay | name_not_known | name_already_known
â””

â”Œ Success
  rep! : REPORT
|
  rep! = okay
â””

â”Œ NotKnown
  ÎPhoneBook
  name? : NAME
  rep! : REPORT
|
  name? âˆ‰ known
  rep! = name_not_known
â””

â”Œ AlreadyKnown
  ÎPhoneBook
  name? : NAME
  rep! : REPORT
|
  name? âˆˆ known
  rep! = name_already_known
â””

Robust Operations

â”€
  DoFindOp  == (lookup âˆ§ Success)  âˆ¨ NotKnown
â””

â”€
  DoAddName  == (addName âˆ§ Success) âˆ¨AlreadyKnown
â””

â”€
  DoDelName  == (delName âˆ§ Success) âˆ¨NotKnown
â””